<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MetaMask Chain Switch</title>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const provider = window.ethereum;
  if (!provider) {
    alert("MetaMask is not installed!");
    return;
  }

  document.getElementById('btn1').addEventListener('click', function() {
    switchChain(17000, 'Holesky', 'https://ethereum-holesky-rpc.publicnode.com', 'https://holesky.etherscan.io', 'ETH');
  });
  document.getElementById('btn2').addEventListener('click', function() {
    switchChain(9659, 'Parallel Testnet', 'https://rpc-accused-coffee-koala-b9fn1dik76.t.conduit.xyz', 'https://explorerl2new-accused-coffee-koala-b9fn1dik76.t.conduit.xyz', 'ETH');
  });
});

async function switchChain(chainId, chainName, rpcUrl, explorer, currencySymbol) {
  const hexChainId = '0x' + chainId.toString(16);
  try {
    await provider.request({
      method: "wallet_switchEthereumChain",
      params: [{ chainId: hexChainId }]
    });
  } catch (switchError) {
    if (switchError.code === 4902) {
      await addChain(chainId, chainName, rpcUrl, explorer, currencySymbol);
    } else {
      console.error("Unable to switch to the chain.");
    }
  }
}

async function addChain(chainId, chainName, rpcUrl, explorer, currencySymbol) {
  const hexChainId = '0x' + chainId.toString(16);
  try {
    await provider.request({
      method: "wallet_addEthereumChain",
      params: [{
        chainId: hexChainId,
        chainName: chainName,
        nativeCurrency: {
          name: currencySymbol,
          symbol: currencySymbol,
          decimals: 18
        },
        rpcUrls: [rpcUrl],
        blockExplorerUrls: [explorer]
      }]
    });
  } catch (addError) {
    console.error(addError);
  }
}
</script>
</head>
<body>
<h1>MetaMask Chain Management</h1>
<button id="btn1">Holesky</button>
<button id="btn2">Switch to Parallel Testnet</button>
</body>
</html>
