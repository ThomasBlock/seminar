<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MetaMask Chain Switch</title>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (typeof window.ethereum !== 'undefined') {
      console.log('MetaMask is installed!');
    } else {
      alert("Please install MetaMask!");
    }
  });

  async function switchChain(chainId, chainName, rpcUrl, explorer, currencySymbol) {
    if (!window.ethereum) {
      alert("MetaMask is not available!");
      return;
    }

    const hexChainId = '0x' + chainId.toString(16); // Convert decimal to hexadecimal for MetaMask compatibility

    try {
      await window.ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: hexChainId }]
      });
    } catch (switchError) {
      console.error(switchError);
      if (switchError.code === 4902) {
        await addChain(chainId, chainName, rpcUrl, explorer, currencySymbol);
      } else {
        console.error("Unable to switch to the chain.");
      }
    }
  }

  async function addChain(chainId, chainName, rpcUrl, explorer, currencySymbol) {
    const hexChainId = '0x' + chainId.toString(16); // Ensure chain ID is in hexadecimal

    try {
      await window.ethereum.request({
        method: "wallet_addEthereumChain",
        params: [{
          chainId: hexChainId,
          chainName: chainName,
          nativeCurrency: {
            name: currencySymbol, // Use a more descriptive name for the currency if available
            symbol: currencySymbol,
            decimals: 18 // This might vary between networks; adjust as necessary
          },
          rpcUrls: [rpcUrl],
          blockExplorerUrls: [explorer]
        }]
      });
    } catch (addError) {
      console.error(addError);
    }
  }
</script>
</head>
<body>
<h1>MetaMask Chain Management</h1>
<button onclick="switchChain(17000, 'Holesky', 'https://ethereum-holesky-rpc.publicnode.com', 'https://holesky.etherscan.io', 'ETH')">Holesky</button>
<button onclick="switchChain(9659, 'Parallel Testnet', 'https://rpc-accused-coffee-koala-b9fn1dik76.t.conduit.xyz', 'https://explorerl2new-accused-coffee-koala-b9fn1dik76.t.conduit.xyz', 'ETH')">Switch to Parallel Testnet</button>
</body>
</html>
